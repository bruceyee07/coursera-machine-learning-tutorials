机器翻译众多挑战中的一个是 对于一个法语句子，可能有多个英语翻译 都是很好的翻译 那么，如何在有几个质量好的翻译结果的情况下 评估机器翻译系统 对于图像识别（只有一个正确答案） 只需要测量准确度就行了 那么如何在有多个好结果的情况下测量准确度呢？ 传统的方法是利用BLEU指数 在这个可选的视频里，我来和大家分享 BLEU指数是如何工作的 例如这个法语句子“Le chat est sur le tapis“ 对应有一个人类翻译的结果作为参照 “猫在垫子上“ 但是这句法语可以有多种翻译结果 另一个人 可能会说“垫子上有只猫” 而这两个结果都是 这句法语非常完美的翻译 在给定一个机器翻译的结果时， BLEU算法能够自动计算出一个指数 来描述机器翻译的好坏 直觉来讲，只要机器翻译的结果 与任何一个人类翻译的参照结果比较相近的话 那么就会有一个高BLEU分数 顺便，BLEU是“双语评估替补“的 替补 在话剧届 替补演员会向资深的演员学习剧中角色 来在必要的时候替补资深演员 而BLEU的提出动机是， 在任何需要人类来评估机器翻译系统的地方 BLEU能给出一个 人类评估结果的替补 BLEU是由Kishore Papineni, Salim Roukos, 以及Todd Ward, and Wei-Jing Zhu 提出的 这篇文章影响力非常大 而且可读性很强 我鼓励你们有时间的话都去读一下 BLEU指数背后的逻辑是 我们需要看机器翻译生成的文字类型 至少在人类的参考翻译里出现过一次 这里人类的参考翻译会作为 深度集或者测试集 那么我们来看一些极端的例子 MT是机器翻译系统 简称 机器翻译的结果, 也就是MT的输出是“ the the the the the the the” 这很明显是很糟糕的翻译结果 机器翻译结果好坏的一个测量方法是 看生成结果的每一个字，看它是否出现在参考翻译里 这种方法叫做机器翻译结果的准确度 这个例子中，机器生成的结果有7个字 而且每个字都出现在了第一个或者第二个参考翻译里，对吧 “the“在两个参考翻译里都有出现 因此每个字看起来都需要被包括在翻译结果里 这句话的翻译精度是7/7 看起来精确度很高 这就是为什么基本的精确度测量方法
（看MT翻译结果中的哪些字 出现在了参考翻译里） 不是很有用的测量方法 这种方法在这个例子中告诉我们MT结果精度很高 取而代之的是一种改进的精度测量方法 我们给每个单词的分数 至多是该词出现在参考翻译中的次数 因此在参考1中，“the”出现了两次 在参考2中，“the”出现了一次 2比1大，所以我们说这个词 最多得两分 在改进的模型中 the这个词的分数是2/7 因为在总共的7个词中，它最多出现两次 这里分母是 总共的7个词 分子是“the”出现的次数 我们剪辑这个计数，取最大值，也可以在2这里，剪辑这个计数 所以这就给了我们修正的精确度量 目前为止，我们一直孤立地看待词语 在BLEU指数里，不仅要看孤立词 也要看成对的词组 我们定义一份双字母组 双字母组仅意味着互邻出现的成对的词 现在，我们来看看我们如何运用双词组定义BLEU指数 这会成为最终BLEU指数的一部分 我们也会采取一元语法，或者单字，还有双词组，也就是 考虑成对的词，甚至更长序列的词 比如三词组，意味着三个词搭配在一起 我们继续前面的例子 我们有同样的参考1和参考2 但是现在比如机器翻译 或是MT系统有略好的输出 “The cat the cat on the mat“ 翻译还是不太好,但也许比上一个要好 这里，可能的双词组是，"the cat"，但忽略了大小写 接着”cat the“，又是一个双词组 紧接着又是”the cat“，前面我已经讲过了，这里我们略过 然后”cat on“是下一个双词组 再是”on the“，以及”the mat“ 所以这些就是机器翻译中输出的双词组 我们来加总一下，这些双词组中每个各出现了多少次 ”The cat“出现了两次，”cat the“出现了一次
其它的都出现了一次 最后，我们来定义截段的字数，统计一下，然后下标剪辑 为了定义起见，我们取这一列数字 假定算法记分仅到最大数的次数 那双词组要么出现在参考1要么是参考2中 ”the cat“在任一个参考翻译中出现的最大值是一次 所以我将把那个字数记录缩减成1 ”Cat the“，在参考1或2中并没有出现 所以我把它剪成0 ”Cat on“，对，出现了一次 我们给它记一次 出现一次，记一分，”the mat“出现了一次 所以这些就是所谓的剪辑计数 我们将对所有部分计数然后剪辑，真正将其缩减到 不超过双词组的长度然后出现在至少一个参考翻译中的次数 最后一个方面 我们修改后的双字母组精度将是截断计数后的总和 也就是1，2，3，4分别除以双词组的总数 2，3，4，5，6，所以六分之四或 三分之二就是修正后的双词组的精度 我们再具体化一点 用我们在一元语法上开发的 我们在一元语法上计算修正后的精度定义为P，下标1 P代表精准度 下标1这里指的是参照的是一元模型 但定义为一元模型的总数 所以也就是出现在机器翻译输出中词的总数 这就是一元模型截断计数的y hat 除以机器翻译输出中一元模型的总数 一元词的数量，对吗？ 这就是我们得到的结果 七分之二，回到上两张幻灯片 这里的1指的是一元 意味着我们在看孤立的单个字 也可以定义Pn为n元版本 不是一元，是n元 所以这就是n元模型的总数 在机器翻译输出中 n元的截断计数除以 n元模型数的总数 这些精度，或者说修正后的精度指数 正如我们在之前的幻灯片中做的一样，以一元或二元模型评估 或者三元模型，也就是三个字 甚至其它n元组的更高的值 这就允许你评估机器翻译的级别 输出是相似的，也可能与参考吻合 你可以说服你自己的一件事就是 如果MT系统里的输出完全和参考1或参考2的一致 那么所有这些P1，P2的值等等，都将等于1 为了得到一个修正的精度1 你只需要将其完全等于参考中的一个数值 有时可能得到甚至不完全是 和参考翻译中一样的结果 但是你可以以一种方式结合它们 仍能产生好的翻译结果 最后 我们把这个合在一起从而形成最终的BLEU指数 所以P下标n仅仅是计算在n元模型上的BLEU指数 同时也仅仅是计算在n元模型上的修正后精度 通过公式计算一个数，你计算出了P1，P2，P3，P4 然后使用下面的公式结合起来 将会是平均值，Pn，n从1到4加总然后除以4 基本上是取平均值 根据公式，BLEU指数被定义为e的这些次方，然后求幂 对其线性操作，幂是严格单调增长 然后我们再多用一个因素调整这个值 这个因素叫作BP惩罚 BP代表 brevity penalty简洁惩罚 细节也许不是很重要 但就是给出一个直观感受，结果是 如果你输出非常简短的翻译，就很容易得到高精准度 因为可能大部分输出的字都在参考表里 但是我们不希望翻译是非常短的 因此，BP，或简短惩罚，就是一个调整因素 用来惩罚翻译系统中输出的非常简短的翻译 简短惩罚的公式如下 如果机器翻译系统实际输出 比人类生成的翻译参考输出要长，那么结果就等于1 否则，一些像那样的公式 总体惩罚更短的翻译 关于细节部分，你们可以在论文中找到 再说一次，在课程的早期部分 我们可以看到单一实数评价指标的重要性 它允许你去试两个方法，看看哪一个评分更高 然后就继续使用那个得分高的方法 所以BLEU指数对机器翻译来说具有革命性意义 在于它给出了一个非常好，决不是完美，但 确实很好的单一实数评估方法 加速了整个机器翻译领域进展 希望这个视频给到了你们关于“BLEU指数是如何工作的”的直观感受 实践中，很少有人会从零开始实行BLEU指数 有些开源应用可以下载 用来评估自身的系统 今天，BLEU指数用于评估生成文本的许多系统 比如机器翻译系统，以及我之前展示的例子 图像字幕系统 用神经网络来生成图像说明 然后使用BLEU指数来看看，到底有多少是和 人类生成的一个或多个参考翻译里的字幕重叠的 BLEU指数确实是有用的单一实数评估方法 无论何时你的算法需要生成一段文字时都可以使用 还可以检验是否和人类生成的参考翻译里 有相似的含义 这不是用来语音识别的，在语音识别中 通常有个事实就是 你用其它方法来看是否得到了语音脚本 确切地说，逐字逐句都是正确的 对于图像标注，一个图片有多个描述 可能和机器翻译来说一样好 有多重翻译，但效果一样好 BLEU指数给出了自动评估的方法 从而加速你的进程 我就讲这些，希望你们能有一个概念“BLEU指数是如何工作的”