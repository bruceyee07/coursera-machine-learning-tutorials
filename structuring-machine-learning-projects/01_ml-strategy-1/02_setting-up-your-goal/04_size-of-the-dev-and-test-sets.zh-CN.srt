1
00:00:00,000 --> 00:00:01,370
在上一节视频中 我们学习了

2
00:00:01,370 --> 00:00:05,445
为什么开发集和测试集应该具有相同的分布

3
00:00:05,445 --> 00:00:07,370
但这些数据集应该有多大呢

4
00:00:07,370 --> 00:00:08,780
建立开发集和测试集的方式

5
00:00:08,780 --> 00:00:11,955
随着深度学习时代的到来而发生着变化

6
00:00:11,955 --> 00:00:14,645
让我们来看一些最佳实践

7
00:00:14,645 --> 00:00:17,870
你也许听说过机器学习中的一条经验法则

8
00:00:17,870 --> 00:00:20,489
那就是将你拥有的所有数据

9
00:00:20,489 --> 00:00:26,495
按照70/30的比例 分割成训练集和测试集

10
00:00:26,495 --> 00:00:30,800
如果需要建立训练集 开发集和测试集

11
00:00:30,800 --> 00:00:42,705
可以将60%的数据作为训练集
20%作为开发集 20%作为测试集

12
00:00:42,705 --> 00:00:47,200
在早期的机器学习时代

13
00:00:47,200 --> 00:00:50,155
这曾经是非常合理的做法

14
00:00:50,155 --> 00:00:54,550
尤其是在数据规模不大的时候

15
00:00:54,550 --> 00:00:57,085
如果你总共只有几百个样例

16
00:00:57,085 --> 00:01:03,555
使用70/30或60/20/20的经验法则是非常合理的

17
00:01:03,555 --> 00:01:05,485
如果你有几千个样例

18
00:01:05,485 --> 00:01:09,070
或者上万个样例

19
00:01:09,070 --> 00:01:13,070
这些比例也是合理的

20
00:01:13,070 --> 00:01:16,255
但是在现代机器学习中

21
00:01:16,255 --> 00:01:20,310
我们往往需要处理更大量的数据

22
00:01:20,310 --> 00:01:26,430
假如你有100万个训练样例

23
00:01:26,430 --> 00:01:29,490
那么一种合理的做法是

24
00:01:29,490 --> 00:01:33,810
使用98%的数据作为训练集

25
00:01:33,810 --> 00:01:40,437
1%作为开发集 1%作为测试集

26
00:01:40,437 --> 00:01:44,590
这里我用D和T分别表示开发(Dev)和测试(Test)集

27
00:01:44,590 --> 00:01:46,710
如果你有一百万个样例

28
00:01:46,710 --> 00:01:48,285
那么其中的1%就已经有

29
00:01:48,285 --> 00:01:54,800
1万个样例了 这对开发集或测试集来说已经足够了

30
00:01:54,800 --> 00:02:00,255
在现代的深度学习中 我们拥有更大量的数据

31
00:02:00,255 --> 00:02:04,020
因此使用远小于20%或30%的数据

32
00:02:04,020 --> 00:02:07,785
作为开发集或测试集是非常合理的

33
00:02:07,785 --> 00:02:12,690
而且因为深度学习算法极度需要数据

34
00:02:12,690 --> 00:02:16,020
在拥有大量数据的问题中

35
00:02:16,020 --> 00:02:20,430
训练集会占有更高的比例

36
00:02:20,430 --> 00:02:24,447
那么 测试集应该多大呢

37
00:02:24,447 --> 00:02:28,930
测试集的作用

38
00:02:28,930 --> 00:02:30,865
是在系统开发完成后

39
00:02:30,865 --> 00:02:34,360
帮我们评估最终系统的性能

40
00:02:34,360 --> 00:02:37,690
因此 测试集的大小只要足够能

41
00:02:37,690 --> 00:02:41,150
保证对系统整体性能评估的高置信度即可

42
00:02:41,150 --> 00:02:43,690
因此 除非你需要

43
00:02:43,690 --> 00:02:48,090
对最终系统性能有非常精确的测量

44
00:02:48,090 --> 00:02:54,059
否则你的测试集并不需要上百万个样例

45
00:02:54,059 --> 00:02:57,640
或许你认为1万个样例就可以

46
00:02:57,640 --> 00:03:00,545
提供足够的置信度来评估性能 或者也可能

47
00:03:00,545 --> 00:03:03,725
需要10万个或更多才够

48
00:03:03,725 --> 00:03:05,260
这个数目可能远小于

49
00:03:05,260 --> 00:03:07,340
总数据量的30%

50
00:03:07,340 --> 00:03:08,440
这取决于你所拥有的总数据量

51
00:03:08,440 --> 00:03:13,250
在某些应用场景中

52
00:03:13,250 --> 00:03:18,320
可能你并不需要对最终系统
整体性能的评估具有很高的置信度

53
00:03:18,320 --> 00:03:23,055
也许你只需要训练集和开发集

54
00:03:23,055 --> 00:03:29,230
那么我认为没有测试集也是可以的

55
00:03:29,230 --> 00:03:31,685
事实上 有时候人们说

56
00:03:31,685 --> 00:03:33,965
他们划分了训练集和测试集

57
00:03:33,965 --> 00:03:40,580
但实际上 却是在测试集上进行迭代

58
00:03:40,580 --> 00:03:42,250
因此并不存在测试集

59
00:03:42,250 --> 00:03:46,415
他们只是划分了训练集和开发集 没有测试集

60
00:03:46,415 --> 00:03:48,604
如果在这个数据集上进行调优

61
00:03:48,604 --> 00:03:50,390
那么将这个所谓的测试集

62
00:03:50,390 --> 00:03:53,205
称为开发集会更加合适

63
00:03:53,205 --> 00:03:56,335
不过我认为在机器学习的历史中

64
00:03:56,335 --> 00:03:59,875
并不是每个人都能区分清楚

65
00:03:59,875 --> 00:04:03,895
有时候所谓的测试集 实际上是开发集

66
00:04:03,895 --> 00:04:07,485
但如果我们只关心有用于训练的数据

67
00:04:07,485 --> 00:04:09,150
和用于调优的数据

68
00:04:09,150 --> 00:04:11,682
然后直接上线最终的系统

69
00:04:11,682 --> 00:04:15,710
而不太关心它的实际性能

70
00:04:15,710 --> 00:04:17,940
我认为也可以只使用训练集和开发集

71
00:04:17,940 --> 00:04:20,700
而不使用测试集

72
00:04:20,700 --> 00:04:22,720
这听起来有点反常

73
00:04:22,720 --> 00:04:26,970
我绝对不是在建议大家在开发系统时舍弃测试集

74
00:04:26,970 --> 00:04:30,225
我觉得有一个单独的测试集会更安心

75
00:04:30,225 --> 00:04:33,900
你可以在上线前使用测试集<br />得到对系统性能的无偏估计

76
00:04:33,900 --> 00:04:37,770
但是如果你有一个很大的开发集

77
00:04:37,770 --> 00:04:41,650
你相信不会对开发集过拟合得太厉害

78
00:04:41,650 --> 00:04:45,200
那么只使用训练集和开发集 也不是完全不合理

79
00:04:45,200 --> 00:04:48,800
不过我一般不建议这样做

80
00:04:48,800 --> 00:04:51,600
总的来说 在大数据时代

81
00:04:51,600 --> 00:04:54,500
我认为传统的70/30法则

82
00:04:54,500 --> 00:04:56,275
已经不再适用了

83
00:04:56,275 --> 00:05:01,035
现在的趋势是 使用更多数据作为训练集
使用较少的数据作为开发集和测试集

84
00:05:01,035 --> 00:05:03,220
尤其是当你的数据集很大的时候

85
00:05:03,220 --> 00:05:06,960
经验法则是 确保开发集的大小足以达到其目的

86
00:05:06,960 --> 00:05:11,110
也就是帮我们评估不同的想法
让我们能更好地从A或B中做出选择

87
00:05:11,110 --> 00:05:15,450
而测试集的目的 是对最终的分类器进行评估

88
00:05:15,450 --> 00:05:18,590
你只需要让测试集的大小足以满足这一目的即可

89
00:05:18,590 --> 00:05:21,710
这可能远小于总数据量的30%

90
00:05:21,710 --> 00:05:24,810
我希望以上内容能给你一些指导和建议

91
00:05:24,810 --> 00:05:28,710
帮你在深度学习时代建立开发集和测试集

92
00:05:28,710 --> 00:05:30,595
接下来 我们有的时候会

93
00:05:30,595 --> 00:05:32,640
在解决一个机器学习的问题的中途

94
00:05:32,640 --> 00:05:34,800
想要更改你的评价指标

95
00:05:34,800 --> 00:05:36,615
或者更改你的开发集和测试集

96
00:05:36,615 --> 00:05:38,250
让我们讨论一下什么时候需要这么做